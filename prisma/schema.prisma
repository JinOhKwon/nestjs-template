generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

/// 유저 모델
model User {
  /// 사용자 시퀀스
  userSeq        Int              @id @default(autoincrement()) @map("USER_SEQ")
  /// 사용자 식별자
  userId         String           @unique @map("USER_ID") @db.VarChar(255)
  /// 사용자 명
  userNm         String           @map("USER_NM") @db.VarChar(255)
  /// 사용자 비밀번호
  userPwd        String           @map("USER_PWD") @db.VarChar(255)
  /// 사용자 폰 번호
  userPhone      String           @map("USER_PHONE") @db.VarChar(255)
  createdAt      DateTime           @default(now())
  updatedAt      DateTime           @updatedAt

  /// 사용자 사용 여부
  userUseYn      YesOrNo @map("USER_USE_YN")
  /// 사용자 역할 맵핑
  user_role_mapp UserRoleMapp[]

  @@map("USER")
}

/// 사용자 역할 맵핑
model UserRoleMapp {
  /// 사용자 시퀀스
  userSeq Int  @map("USER_SEQ")
  /// 역할 시퀀스
  roleSeq Int  @map("ROLE_SEQ")
  /// 역할 관계
  roles   Role @relation(fields: [roleSeq], references: [roleSeq], onDelete: NoAction, onUpdate: NoAction)
  /// 사용자 관계
  users   User @relation(fields: [userSeq], references: [userSeq], onDelete: NoAction, onUpdate: NoAction)

  @@unique([userSeq, roleSeq], map: "USER_SEQ_ROLE_SEQ_UNIQUE")
  @@index([roleSeq], map: "USER_ROLE_MAPP_ROLE_SEQ_fkey")
  @@map("USER_ROLE_MAPP")
}

/// 역할 모델
model Role {
  /// 역할 시퀀스
  roleSeq        Int            @id @default(autoincrement()) @map("ROLE_SEQ")
  /// 역할 식별자
  roleId         String         @unique @map("ROLE_ID") @db.VarChar(255)
  /// 역할 명
  roleNm         String         @map("ROLE_NM") @db.VarChar(255)
  /// 역할 사용 여부
  roleUseYn      YesOrNo        @map("ROLE_USE_YN")
  /// 사용자 역할 맵핑
  user_role_mapp UserRoleMapp[]

  @@map("ROLE")
}

/// Y형식, N 형식
enum YesOrNo {
  Y
  N
}
